(this.webpackJsonpasteria=this.webpackJsonpasteria||[]).push([[0],{14:function(e,t,n){e.exports=n(19)},19:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),u=n.n(i),l=n(8),s=n(1),c=n(3),o=n(5),h=n(2),v=n(4);function f(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"G"),r.a.createElement("th",null,"m"),r.a.createElement("th",null,"b"),r.a.createElement("th",null,"R")))}function b(e){return r.a.createElement("tbody",null,e.data.map((function(e,t){var n=e.m,a=e.b,i=e.r;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t),r.a.createElement("td",null,null!==n&&void 0!==n?n:""),r.a.createElement("td",null,null!==a&&void 0!==a?a:""),r.a.createElement("td",null,null!==i&&void 0!==i?i:""))})).reverse())}var m=function(e){var t=e.data;return r.a.createElement("table",null,r.a.createElement(f,null),r.a.createElement(b,{data:t}))},d=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(h.a)(t).call(this,e))).state=void 0,n.handleSubmit=void 0,n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(l.a)({},a,r))},n.submitForm=function(){n.props.handleSubmit(n.state)},n.state={samples:1,sensitivity:1,generations:1},n.handleSubmit=e.handleSubmit,n}return Object(v.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.samples,n=e.sensitivity,a=e.generations;return r.a.createElement("form",null,r.a.createElement("label",null,"Samples"),r.a.createElement("input",{type:"number",name:"samples",value:isFinite(t)?t:"",min:"1",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Sensitivity"),r.a.createElement("input",{type:"number",name:"sensitivity",value:isFinite(n)?n:"",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Generations"),r.a.createElement("input",{type:"number",name:"generations",value:isFinite(a)?a:"",min:"0",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:"Train",onClick:this.submitForm}))}}]),t}(a.Component),y=function(){function e(){Object(s.a)(this,e),this._value=NaN,this._deriv=new Map}return Object(c.a)(e,[{key:"value",value:function(){return isFinite(this._value)||(this._value=this.valueImpl()),this._value}},{key:"deriv",value:function(e){return this._deriv.has(e)||this._deriv.set(e,this.derivImpl(e)),this._deriv.get(e)}},{key:"reset",value:function(){this._value=NaN,this._deriv.clear()}}]),e}(),p=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(h.a)(t).call(this))).arg=void 0,n.arg=e,n}return Object(v.a)(t,e),t}(y),g=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(h.a)(t).call(this))).left=void 0,a.right=void 0,a.left=e,a.right=n,a}return Object(v.a)(t,e),t}(y),j=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).terms=void 0;for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e.terms=a,e}return Object(v.a)(t,e),t}(y),O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(s.a)(this,e),this.name=void 0,this.val=void 0,this.name=t,this.val=n}return Object(c.a)(e,[{key:"bind",value:function(e){this.val=e}},{key:"value",value:function(){return this.val}},{key:"deriv",value:function(e){return e===this?1:0}},{key:"print",value:function(){return this.name}}]),e}(),E=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(c.a)(t,[{key:"valueImpl",value:function(){return this.left.value()*this.right.value()}},{key:"derivImpl",value:function(e){return this.left.deriv(e)*this.right.value()+this.left.value()*this.right.deriv(e)}},{key:"print",value:function(){return this.left.print()+" * "+this.right.print()}}]),t}(g),k=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(c.a)(t,[{key:"valueImpl",value:function(){return this.terms.reduce((function(e,t){return e+t.value()}),0)}},{key:"derivImpl",value:function(e){return this.terms.reduce((function(t,n){return t+n.deriv(e)}),0)}},{key:"print",value:function(){return"("+this.terms.map((function(e){return e.print()})).join(" + ")+")"}}]),t}(j),w=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(c.a)(t,[{key:"valueImpl",value:function(){var e=this.arg.value(),t=1+Math.exp(e);return isFinite(t)?Math.log(t):e}},{key:"derivImpl",value:function(e){var t=this.arg.value(),n=1/(1+Math.exp(-t));return(n=isFinite(n)?n:0)*this.arg.deriv(e)}},{key:"print",value:function(){return"ReLU("+this.arg.print()+")"}}]),t}(p),x=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(c.a)(t,[{key:"valueImpl",value:function(){var e=this.left.value()-this.right.value();return e*e}},{key:"derivImpl",value:function(e){return 2*(this.left.value()-this.right.value())*(this.left.deriv(e)-this.right.deriv(e))}},{key:"print",value:function(){return"("+this.left.print()+" - "+this.right.value()+")^2"}}]),t}(g),A=function(){function e(){Object(s.a)(this,e),this.adjustments=void 0,this.adjustments=[]}return Object(c.a)(e,[{key:"value",value:function(){return this.get().value()}},{key:"print",value:function(){return this.get().print()}},{key:"study",value:function(e){this.adjustments.push(-this.studyImpl(e))}},{key:"learn",value:function(e){if(this.adjustments.length>0){var t=this.adjustments.reduce((function(e,t){return e+t}),0)*e/this.adjustments.length;this.learnImpl(t),this.adjustments=[]}}}]),e}(),I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(h.a)(t).call(this))).w=void 0,n.t=void 0,n.w=new O("w"+t.count,1),n.t=new E(n.w,e.get()),++t.count,n}return Object(v.a)(t,e),Object(c.a)(t,[{key:"get",value:function(){return this.w}},{key:"getExpr",value:function(){return this.t}},{key:"studyImpl",value:function(e){return e.deriv(this.w)}},{key:"learnImpl",value:function(e){this.w.bind(this.value()+e)}},{key:"reset",value:function(){this.t.reset()}}]),t}(A);I.count=0;var S=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).b=void 0,e.b=new O("b"+t.count,0),++t.count,e}return Object(v.a)(t,e),Object(c.a)(t,[{key:"get",value:function(){return this.b}},{key:"getExpr",value:function(){return this.get()}},{key:"studyImpl",value:function(e){return e.deriv(this.b)}},{key:"learnImpl",value:function(e){this.b.bind(this.value()+e)}}]),t}(A);S.count=0;var C=n(10),F=n(6),M=n(7),N=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"value",value:function(){return this.get().value()}},{key:"print",value:function(){return this.get().print()}}]),e}(),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(h.a)(t).call(this))).x=void 0,n.x=new O(e),n}return Object(v.a)(t,e),Object(c.a)(t,[{key:"get",value:function(){return this.x}},{key:"bind",value:function(e){this.x.bind(e)}}]),t}(N),R=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(o.a)(this,Object(h.a)(t).call(this))).weights=void 0,n.bias=void 0,n.sum=void 0,n.exp=void 0;for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];n.weights=r.map((function(e){return new I(e)})),n.bias=new S;var u=n.weights.map((function(e){return e.getExpr()}));return n.sum=Object(F.a)(k,Object(M.a)(u).concat([n.bias.getExpr()])),n.exp=new e(n.sum),n}return Object(v.a)(t,e),Object(c.a)(t,[{key:"get",value:function(){return this.exp}},{key:"getWeight",value:function(e){return this.weights[e]}},{key:"getBias",value:function(){return this.bias}},{key:"study",value:function(e){this.weights.forEach((function(t){return t.study(e)})),this.bias.study(e)}},{key:"learn",value:function(e){this.weights.forEach((function(t){return t.learn(e)})),this.bias.learn(e)}},{key:"reset",value:function(){this.exp.reset(),this.sum.reset(),this.weights.forEach((function(e){return e.reset()}))}}]),t}(N),T=function(e){function t(e,n,a){var r,i;Object(s.a)(this,t);for(var u=arguments.length,l=new Array(u>3?u-3:0),c=3;c<u;c++)l[c-3]=arguments[c];return(i=Object(o.a)(this,(r=Object(h.a)(t)).call.apply(r,[this,n].concat(l)))).y=void 0,i.err=void 0,i.y=new O(e),i.err=new a(i.get(),i.y),i}return Object(v.a)(t,e),Object(c.a)(t,[{key:"getErr",value:function(){return this.err}},{key:"valueErr",value:function(){return this.getErr().value()}},{key:"printErr",value:function(){return this.getErr().print()}},{key:"bind",value:function(e){this.y.bind(e)}},{key:"reset",value:function(){Object(C.a)(Object(h.a)(t.prototype),"reset",this).call(this),this.err.reset()}}]),t}(R),B=n(11),W=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"print",value:function(){return"["+this.get().map((function(e){return e.print()})).join(", ")+"]"}},{key:"size",value:function(){return this.get().length}}]),e}(),z=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).neurons=void 0,e.neurons=new Map;for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(var i=0,u=a;i<u.length;i++){var l=u[i];e.neurons.set(l,new _(l))}return e}return Object(v.a)(t,e),Object(c.a)(t,[{key:"get",value:function(){return Array.from(this.neurons.values())}},{key:"getNeuron",value:function(e){return this.neurons.get(e)}},{key:"bind",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=this.neurons[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var u,l=r.value,s=Object(B.a)(l,2),c=s[0];s[1].bind(null!==(u=e.get(c))&&void 0!==u?u:0)}}catch(o){n=!0,a=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}}]),t}(W),L=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(c.a)(t,[{key:"study",value:function(e){this.get().forEach((function(t){return t.study(e)}))}},{key:"learn",value:function(e){this.get().forEach((function(t){return t.learn(e)}))}},{key:"reset",value:function(){this.get().forEach((function(e){return e.reset()}))}}]),t}(W),U=function(e){function t(e,n,a){var r;Object(s.a)(this,t),(r=Object(o.a)(this,Object(h.a)(t).call(this))).neurons=void 0,r.err=void 0,r.neurons=new Map;for(var i=arguments.length,u=new Array(i>3?i-3:0),l=3;l<i;l++)u[l-3]=arguments[l];for(var c=0,v=u;c<v.length;c++){var f=v[c];r.neurons.set(f,Object(F.a)(T,[f,n,a].concat(Object(M.a)(e.get()))))}return r.err=Object(F.a)(k,Object(M.a)(Array.from(r.neurons.values()).map((function(e){return e.getErr()})))),r}return Object(v.a)(t,e),Object(c.a)(t,[{key:"get",value:function(){return Array.from(this.neurons.values())}},{key:"getNeuron",value:function(e){return this.neurons.get(e)}},{key:"getWeight",value:function(e,t){var n;return null===(n=this.neurons.get(e))||void 0===n?void 0:n.getWeight(t)}},{key:"getBias",value:function(e){var t;return null===(t=this.neurons.get(e))||void 0===t?void 0:t.getBias()}},{key:"getErr",value:function(){return this.err}},{key:"valueErr",value:function(){return this.getErr().value()}},{key:"printErr",value:function(){return this.getErr().print()}},{key:"bind",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=this.neurons[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var u,l=r.value,s=Object(B.a)(l,2),c=s[0];s[1].bind(null!==(u=e.get(c))&&void 0!==u?u:0)}}catch(o){n=!0,a=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}},{key:"reset",value:function(){Object(C.a)(Object(h.a)(t.prototype),"reset",this).call(this),this.err.reset()}}]),t}(L),q="x",G="y",J=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(h.a)(t).call(this,e))).in=void 0,n.out=void 0,n.state=void 0,n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(l.a)({},a,r))},n.handleSubmit=function(e){for(var t=0;t<e.generations;++t)n.train(e.samples,e.sensitivity)},n.in=new z(q),n.out=new U(n.in,w,x,G),n.out.bind(new Map([[G,42]])),n.state={data:[{m:1,b:0,r:void 0}],input:0},n}return Object(v.a)(t,e),Object(c.a)(t,[{key:"train",value:function(e,t){if(isFinite(e)&&isFinite(t)&&!(e<=0)){for(var n=0,a=0;a<e;++a)this.out.reset(),this.in.bind(new Map([[q,Math.random()]])),this.out.study(this.out.getErr()),n+=this.out.valueErr();this.out.learn(t);var r=this.state.data,i=this.out.getWeight(G,0).value(),u=this.out.getBias(G).value();r[r.length-1].r=Math.sqrt(n/e),r.push({m:i,b:u,r:void 0}),this.setState({data:r})}}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.input,a=NaN;return isFinite(n)&&(this.out.reset(),this.in.bind(new Map([[q,n]])),a=this.out.getNeuron(G).value()),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Asteria"),r.a.createElement("p",null,"Asteria wants to learn the answer to life, the universe, and everything, but she needs your help!")),r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"Asteria is the simplest possible neural network: a single input neuron linked to a single output neuron.",r.a.createElement("br",null),"She has no hidden layers, so Asteria is really just a linear relation passed through an activation function (softplus).",r.a.createElement("br",null),"The full equation for Asteria is y=ReLU(mx+b). Her initial state is y=ReLU(x), where m=1 and b=0.",r.a.createElement("br",null),"Asteria will be trained to minimize R^2, the mean of (y-42)^2 over randomly-sampled values of x ranging from 0 to 1."),r.a.createElement("h2",null,"Testing"),r.a.createElement("p",null,"If she has learned well, Asteria should output 42 no matter what input we give her. Test it out here!"),r.a.createElement("label",null,"Input"),r.a.createElement("input",{type:"number",name:"input",value:n,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Output"),r.a.createElement("input",{readOnly:!0,type:"text",name:"output",value:a}),r.a.createElement("h2",null,"Training"),r.a.createElement("p",null,"We want Asteria to ultimately settle on y=42~ReLU(42), where m=0 and b=42.",r.a.createElement("br",null),"To determine how to adjust m and b, Asteria samples values of x between 0 to 1 (you decide how many) and does fancy backpropagation.",r.a.createElement("br",null),"Sensitivity determines the strength of the adjustments to m and b in each generation of Asteria.",r.a.createElement("br",null),"If sensitivity is negative, Asteria will try to maximize error instead of minimizing it.",r.a.createElement("br",null),"If sensitivity is too large (the upper bound is around 0.75), Asteria will overshoot on her adjustments and fail to settle anywhere."),r.a.createElement(d,{handleSubmit:this.handleSubmit}),r.a.createElement(m,{data:t}))}}]),t}(a.Component);u.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.ba8373aa.chunk.js.map